<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - Page Not Found | {{.CVData.PersonalInfo.Name}}</title>
    <meta name="description" content="The page you're looking for doesn't exist.">
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Favicon and app icons -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicons/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicons/apple-touch-icon.webp">
    <link rel="icon" type="image/webp" sizes="32x32" href="/static/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/webp" sizes="16x16" href="/static/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/static/images/favicons/site.webmanifest">
    
    <!-- Fonts -->
    <link rel="stylesheet" href="/static/fonts/inter.css">
    
    <!-- Main CSS - same as homepage for consistency -->
    <link rel="stylesheet" href="{{.Assets.CSSMain}}">
    
    <!-- Critical CSS for 404 specific styles -->
    <style nonce="{{.CSPNonce}}">
        .error-404-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            text-align: center;
            width: 100%;
            max-width: 800px;
            padding: 0 2rem;
        }
        
        .error-404-numbers {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin-bottom: 3rem;
            height: 200px;
        }
        
        .digit {
            font-size: clamp(6rem, 15vw, 10rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-block;
            opacity: 0;
            line-height: 1;
        }
        
        .error-404-text {
            font-size: clamp(1.25rem, 3vw, 1.75rem);
            color: var(--text-secondary);
            opacity: 0;
            margin: 0;
        }
        
        .home-link {
            color: var(--primary-color);
            text-decoration: none;
            position: relative;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .home-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            transition: width 0.3s ease;
        }
        
        .home-link:hover {
            color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .home-link:hover::after {
            width: 100%;
        }
        
        /* Hide loader for 404 page */
        #loader {
            display: none !important;
        }
        
        /* Ensure proper layering */
        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .desktop-navbar,
        .mobile-navigation {
            z-index: 100;
        }
        
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }
        
        @media (max-width: 768px) {
            .error-404-numbers {
                gap: 1rem;
                height: 150px;
            }
            
            .digit {
                font-size: 5rem;
            }
            
            .error-404-text {
                font-size: 1.25rem;
            }
        }
    </style>
    
    <!-- Three.js import map -->
    <script type="importmap" nonce="{{.CSPNonce}}">
    {
        "imports": {
            "three": "/static/js/vendor/three.module.min.js"
        }
    }
    </script>
    
    <!-- Preload GSAP for animations -->
    <link rel="preload" href="/static/js/vendor/gsap.min.js" as="script">
</head>
<body>
    {{template "threejs-setup" .}}
    {{template "navigation" .}}
    
    <main class="error-404-container">
        <div class="error-404-numbers">
            <span class="digit digit-4-left">4</span>
            <span class="digit digit-0">0</span>
            <span class="digit digit-4-right">4</span>
        </div>
        <p class="error-404-text">
            Are you lost? Let me <a href="/" class="home-link">take you home</a>.
        </p>
    </main>
    
    {{template "footer" .}}
    
    <!-- Load GSAP for animations -->
    <script src="/static/js/vendor/gsap.min.js"></script>
    
    <!-- Three.js scene -->
    <script type="module" src="{{.Assets.JSThreeScene}}" nonce="{{.CSPNonce}}"></script>
    
    <!-- 404 animations -->
    <script nonce="{{.CSPNonce}}">
        document.addEventListener('DOMContentLoaded', function() {
            // Create GSAP timeline for 404 animations
            const tl = gsap.timeline({
                defaults: { ease: "power3.out" }
            });
            
            // Set initial positions
            gsap.set('.digit-4-left', { x: -window.innerWidth, opacity: 0 });
            gsap.set('.digit-4-right', { x: window.innerWidth, opacity: 0 });
            gsap.set('.digit-0', { y: -window.innerHeight, opacity: 0 });
            gsap.set('.error-404-text', { y: 100, opacity: 0 });
            
            // Animate elements in sequence
            tl.to('.digit-4-left', {
                x: 0,
                opacity: 1,
                duration: 1,
                ease: "power3.out"
            })
            .to('.digit-4-right', {
                x: 0,
                opacity: 1,
                duration: 1,
                ease: "power3.out"
            }, "-=0.8")
            .to('.digit-0', {
                y: 0,
                opacity: 1,
                duration: 1.2,
                ease: "bounce.out"
            }, "-=0.7")
            .to('.error-404-text', {
                y: 0,
                opacity: 1,
                duration: 0.8,
                ease: "power2.out"
            }, "-=0.4");
            
            // Add subtle floating animation after initial animation
            tl.to('.error-404-numbers', {
                y: -10,
                duration: 2,
                ease: "power1.inOut",
                repeat: -1,
                yoyo: true
            }, "+=0.5");
        });
        
        // Mobile navigation handler (same as homepage)
        const mobileHamburger = document.getElementById('mobileHamburger');
        const mobileMenu = document.getElementById('mobileMenu');
        
        if (mobileHamburger && mobileMenu) {
            mobileHamburger.addEventListener('click', function() {
                const isOpen = mobileMenu.classList.contains('active');
                
                if (isOpen) {
                    mobileMenu.classList.remove('active');
                    mobileHamburger.classList.remove('active');
                    mobileHamburger.setAttribute('aria-expanded', 'false');
                } else {
                    mobileMenu.classList.add('active');
                    mobileHamburger.classList.add('active');
                    mobileHamburger.setAttribute('aria-expanded', 'true');
                }
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!mobileHamburger.contains(e.target) && !mobileMenu.contains(e.target)) {
                    mobileMenu.classList.remove('active');
                    mobileHamburger.classList.remove('active');
                    mobileHamburger.setAttribute('aria-expanded', 'false');
                }
            });
        }
    </script>
</body>
</html>